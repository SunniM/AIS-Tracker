<!DOCTYPE html>
<html>

<head>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
        function loadMap() {
            var mapOptions = {
                mapId: 'a9e21ced58ad4189',
                center: new google.maps.LatLng(17.609993, 83.221436),
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                disableDefaultUI: true
            };
            var map = new google.maps.Map(document.getElementById("sample"), mapOptions);

            // Add an event listener to retrieve the coordinates

            // map.addListener('click', function (event) {
            //     const latitude = event.latLng.lat();
            //     const longitude = event.latLng.lng();
            
            map.addListener('idle', function() {
                const center = map.getCenter();
                const latitude = center.lat();
                const longitude = center.lng();
                const zoom = map.getZoom();


                // Create the data object with the coordinates
                const data = {
                    latitude: latitude,
                    longitude: longitude,
                    zoom: map.getZoom()
                };

                // Send the POST request
                fetch('http://localhost:8080', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
            });
        }

    </script>

</head>

<body onload="loadMap()">
    <div id="sample" style="width:580px; height:400px;"></div>
    <div> </div>
</body>

</html>